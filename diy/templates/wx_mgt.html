<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8"/>
    <title>WeiXin ID Managment</title>
    {#        <meta name="description" content="微信公众号，知乎日报, 自定义网站 RSS。"/>#}
    <link rel="stylesheet" href="{{ static_url('all.css') }}"/>
    <link rel="stylesheet" href="{{ static_url('jquery.dataTables.min.css') }}"/>
    <script type="text/javascript" src="{{ static_url('jquery-1.12.4.js') }}"></script>
    <script type="text/javascript" src="{{ static_url('jquery.dataTables.min.js') }}"></script>


</head>
<body>


<div class="content">
    <form action="/wx_mgt/add" method="post">
        <input type="text" name="wx_url" placeholder="请粘贴微信号的一篇文章地址" size="100"/>
        <input type="submit" value="添加微信号"/>
    </form>

    <table id="id_table" class="display" cellspacing="0" width="100%">
        <thead class="tableTitle">
        <tr>
            <th>微信号</th>
            <th>微信名称</th>
            <th width="10%">数量</th>
            <th width="15%">最后更新</th>
            <th width="45%">最后文章</th>
            <th width="20%">描述</th>
        </tr>
        </thead>
        <tbody>
        {% for l in list %}
            <tr class="tableContent">
                {#                <td>{{ l["wx_id"] }} <a href="/wx_mgt/del?wxid={{ l['wx_id'] }}">删除</a></td>#}
                <td>{{ l["wx_id"] }}
                    <form action="/wx_mgt/del" method="post" onsubmit="return confirm('确定删除这个微信号以及所有文章么?')">
                        <input type="hidden" name="wxid" value={{ l["wx_id"] }}>
                        <input type=submit value="删除"/>
                    </form>
                </td>

                <td>
                    <a href={{ SouGou_URL.format(id=l["wx_id"]) }} target="_blank">{{ l['name'] }}</a>
                </td>
                <td><a href={{ RSS_URL.format(id=l["wx_id"]) }} target="_blank">{{ l["msg_count"] }}</a></td>
                <td>{{ l["last_date"] }}</td>
                <td align="left"><a href={{ l["last_link"] }} target="_blank">{{ l["last_msg"] }} </a></td>
                <td align="left">{{ l["desc"] }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

</div>


<script>
    $(document).ready(function () {
        $('#id_table').DataTable({
            "searching": true,  //是否允许Datatables开启本地搜索
            "paging": false,  //是否开启本地分页
            scrollY: 600,
            "lengthChange": false,  //是否允许用户改变表格每页显示的记录数
            "info": true,   //控制是否显示表格左下角的信息
            {#            "columnDefs": [{#}
            {#                "targets": 'sort',  //列的样式名#}
            {#                "orderable": true    //包含上样式名‘nosort’的禁止排序#}
            {#            }],#}
            //跟数组下标一样，第一列从0开始，这里表格初始化时，第四列默认降序
            "order": [3]  //asc升序   desc降序  "order": [[ 3, "desc" ]]默认第四列为降序排列
        });
    });


</script>

</body>
</html>
